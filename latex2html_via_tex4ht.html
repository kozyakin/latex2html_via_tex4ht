<!DOCTYPE html>
<html lang='en-US'>
<head>
  <title>My notes on how to use Tex4ht+MathJax</title>
  <meta charset='utf-8'>
  <meta content='TeX4ht (https://tug.org/tex4ht/)' name='generator'>
  <meta content='width=device-width,initial-scale=1' name='viewport'>
  <style type='text/css'>

  <!--   

  /* start css.sty */  
  .cmr-17{font-size:170%;}  
  .cmr-12{font-size:120%;}  
  .cmr-6{font-size:60%;}  
  .cmtt-10{font-family: monospace,monospace;}  
  .cmtt-10{font-family: monospace,monospace;}  
  .cmr-9{font-size:90%;}  
  .cmtt-9{font-size:90%;font-family: monospace,monospace;}  
  .cmtt-9{font-family: monospace,monospace;}  
  .cmbx-10{ font-weight: bold;}  
  .cmti-10{ font-style: italic;}  
  .cmmi-9{font-size:90%;font-style: italic;}  
  .cmsy-9{font-size:90%;}  
  p.noindent { text-indent: 0em }  
  td p.noindent { text-indent: 0em; margin-top:0em; }  
  p.nopar { text-indent: 0em; }  
  p.indent{ text-indent: 1.5em }  
  p{margin-top:0;margin-bottom:0}  
  p.noindent + p.noindent{margin-top:1em;}  
  a { overflow-wrap: break-word; word-wrap: break-word; word-break: break-word; hyphens: auto; }  
  @media print {div.crosslinks {visibility:hidden;}}  
  table.tabular{border-collapse: collapse; border-spacing: 0;}  
  a img { border-top: 0; border-left: 0; border-right: 0; }  
  center { margin-top:1em; margin-bottom:1em; }  
  td center { margin-top:0em; margin-bottom:0em; }  
  .Canvas { position:relative; }  
  img.math{vertical-align:middle;}  
  div.par-math-display, div.math-display{text-align:center;}  
  body{ margin:1em auto; max-width:80ch; padding:0 .62em; }  
  h1,h2,h3,h4,h5 { line-height:1.2; }  
  @media print{ body{ max-width:none } }  
  .partHead, .likepartHead { font-size: 2em; }  
  .chapterHead, .likechapterHead { font-size: 1.7411em; }  
  .sectionHead, .likesectionHead { font-size: 1.5157em; }  
  .subsectionHead, .likesubsectionHead { font-size: 1.3195em; }  
  .subsubsectionHead, .likesubsubsectionHead { font-size: 1.1487em; }  
  @media (prefers-color-scheme: dark) { img[src^="latex2html_via_tex4ht"]{filter: invert(1); } }  
  li p.indent { text-indent: 0em }  
  li p:first-child{ margin-top:0em; }  
  li p:last-child, li div:last-child { margin-bottom:0.5em; }  
  li p:first-child{ margin-bottom:0; }  
  li p~ul:last-child, li p~ol:last-child{ margin-bottom:0.5em; }  
  .enumerate1 {list-style-type:decimal;}  
  .enumerate2 {list-style-type:lower-alpha;}  
  .enumerate3 {list-style-type:lower-roman;}  
  .enumerate4 {list-style-type:upper-alpha;}  
  div.newtheorem { margin-bottom: 2em; margin-top: 2em;}  
  div.newtheorem .head{font-weight: bold;}  
  .obeylines-h,.obeylines-v {white-space: nowrap; }  
  div.obeylines-v p { margin-top:0; margin-bottom:0; }  
  .overline{ text-decoration:overline; }  
  .overline img{ border-top: 1px solid black; }  
  td.displaylines {text-align:center; white-space:nowrap;}  
  .centerline {text-align:center;}  
  .rightline {text-align:right;}  
  pre.verbatim {font-family: monospace,monospace; text-align:left; clear:both; }  
  .fbox {padding-left:3.0pt; padding-right:3.0pt; text-indent:0pt; border:solid black 0.4pt; }  
  div.fbox {display:table}  
  div.center div.fbox {text-align:center; clear:both; padding-left:3.0pt; padding-right:3.0pt; text-indent:0pt; border:solid black 0.4pt; }  
  div.minipage{width:100%;}  
  div.center, div.center div.center {text-align: center; margin-left:1em; margin-right:1em;}  
  div.center div {text-align: left;}  
  div.flushright, div.flushright div.flushright {text-align: right;}  
  div.flushright div {text-align: left;}  
  div.flushleft {text-align: left;}  
  .underline{ text-decoration:underline; }  
  .underline img{ border-bottom: 1px solid black; margin-bottom:1pt; }  
  .framebox-c, .framebox-l, .framebox-r { padding-left:3.0pt; padding-right:3.0pt; text-indent:0pt; border:solid black 0.4pt; }  
  .framebox-c {text-align:center;}  
  .framebox-l {text-align:left;}  
  .framebox-r {text-align:right;}  
  span.thank-mark{ vertical-align: super }  
  span.footnote-mark sup.textsuperscript, span.footnote-mark a sup.textsuperscript{ font-size:80%; }  
  div.footnotes{border-top:solid 1px black; border-bottom:solid 1px black; padding-bottom:1ex; padding-top:0.5ex; margin-right:15%; margin-top:2ex; font-style:italic; font-size:85%;}  
  div.footnotes p{margin-top:0; margin-bottom:0; text-indent:0;}  
  div.tabular, div.center div.tabular {text-align: center; margin-top:0.5em; margin-bottom:0.5em; }  
  table.tabular td p{margin-top:0em;}  
  table.tabular {margin-left: auto; margin-right: auto;}  
  td p:first-child{ margin-top:0em; }  
  td p:last-child{ margin-bottom:0em; }  
  div.td00{ margin-left:0pt; margin-right:0pt; }  
  div.td01{ margin-left:0pt; margin-right:5pt; }  
  div.td10{ margin-left:5pt; margin-right:0pt; }  
  div.td11{ margin-left:5pt; margin-right:5pt; }  
  table[rules] {border-left:solid black 0.4pt; border-right:solid black 0.4pt; }  
  td.td00{ padding-left:0pt; padding-right:0pt; }  
  td.td01{ padding-left:0pt; padding-right:5pt; }  
  td.td10{ padding-left:5pt; padding-right:0pt; }  
  td.td11{ padding-left:5pt; padding-right:5pt; }  
  table[rules] {border-left:solid black 0.4pt; border-right:solid black 0.4pt; }  
  .hline hr, .cline hr{ height : 0px; margin:0px; }  
  .hline td, .cline td{ padding: 0; }  
  .hline hr, .cline hr{border:none;border-top:1px solid black;}  
  .hline {border-top: 1px solid black;}  
  .hline + .vspace:last-child{display:none;}  
  .hline:first-child{border-bottom:1px solid black;border-top:none;}  
  .tabbing-right {text-align:right;}  
  div.float, div.figure {margin-left: auto; margin-right: auto;}  
  div.float img {text-align:center;}  
  div.figure img {text-align:center;}  
  .marginpar,.reversemarginpar {width:20%; float:right; text-align:left; margin-left:auto; margin-top:0.5em; font-size:85%; text-decoration:underline;}  
  .marginpar p,.reversemarginpar p{margin-top:0.4em; margin-bottom:0.4em;}  
  .reversemarginpar{float:left;}  
  table.equation {width:100%;}  
  .equation td{text-align:center; }  
  td.equation { margin-top:1em; margin-bottom:1em; }  
  td.equation-label { width:5%; text-align:center; }  
  td.eqnarray4 { width:5%; white-space: normal; }  
  td.eqnarray2 { width:5%; }  
  table.eqnarray-star, table.eqnarray {width:100%;}  
  div.eqnarray{text-align:center;}  
  div.array {text-align:center;}  
  div.pmatrix {text-align:center;}  
  table.pmatrix {width:100%;}  
  span.pmatrix img{vertical-align:middle;}  
  div.pmatrix {text-align:center;}  
  table.pmatrix {width:100%;}  
  span.bar-css {text-decoration:overline;}  
  img.cdots{vertical-align:middle;}  
  .partToc a, .partToc, .likepartToc a, .likepartToc {line-height: 200%; font-weight:bold; font-size:110%;}  
  .index-item, .index-subitem, .index-subsubitem {display:block}  
  div.caption {text-indent:-2em; margin-left:3em; margin-right:1em; text-align:left;}  
  div.caption span.id{font-weight: bold; white-space: nowrap; }  
  h1.partHead{text-align: center}  
  p.bibitem { text-indent: -2em; margin-left: 2em; margin-top:0.6em; margin-bottom:0.6em; }  
  p.bibitem-p { text-indent: 0em; margin-left: 2em; margin-top:0.6em; margin-bottom:0.6em; }  
  .subsubsectionHead, .likesubsubsectionHead { font-size: 1em; }  
  .paragraphHead, .likeparagraphHead { margin-top:2em; font-weight: bold;}  
  .subparagraphHead, .likesubparagraphHead { font-weight: bold;}  
  .verse{white-space:nowrap; margin-left:2em}  
  div.maketitle {text-align:center;}  
  h2.titleHead{text-align:center;}  
  div.maketitle{ margin-bottom: 2em; }  
  div.author, div.date {text-align:center;}  
  div.thanks{text-align:left; margin-left:10%; font-size:85%; font-style:italic; }  
  div.abstract p {margin-left:5%; margin-right:5%;}  
  div.abstract {width:100%;}  
  .abstracttitle{text-align:center;margin-bottom:1em;}  
  .subsectionToc, .likesubsectionToc {margin-left:1em;}  
  .subsubsectionToc, .likesubsubsectionToc {margin-left:2em;}  
  .paragraphToc, .likeparagraphToc {margin-left:3em;}  
  .subparagraphToc, .likesubparagraphToc {margin-left:4em;}  
  figure.float, div.figure {margin-left: auto; margin-right: auto;}  
  figure.figure {text-align:center;}  
  figcaption.caption {text-indent:-2em; margin-left:3em; margin-right:1em; text-align:center;}  
  figcaption.caption span.id{font-weight: bold; white-space: nowrap; }  
  p + figcaption, img + figcaption{margin-top: 1em;}  
  .abstract{margin:1em;}  
  .equation td{text-align:center; }  
  .equation-star td{text-align:center; }  
  table.equation-star { width:100%; }  
  table.equation { width:100%; }  
  table.align, table.alignat, table.xalignat, table.xxalignat, table.flalign {width:95%; margin-left:5%; white-space: nowrap;}  
  table.align-star, table.alignat-star, table.xalignat-star, table.flalign-star {margin-left:auto; margin-right:auto; white-space: nowrap;}  
  td.align-label { width:5%; text-align:center; }  
  td.align-odd { text-align:right; padding-right:0.3em;}  
  td.align-even { text-align:left; padding-right:0.6em;}  
  table.multline, table.multline-star {width:100%;}  
  td.gather {text-align:center; }  
  table.gather {width:100%;}  
  div.gather-star {text-align:center;}  
  .rotatebox{display: inline-block;}  
  body { margin:5% 5%; max-width:72em; font-size:large; padding:0 40px;}  
  p.indent {text-indent:1.5em;}  
  .columns-3 p.indent {text-indent:0em;}  
  p.bibitem-p { text-indent: 1.5em; margin-left: 2em; margin-top:0em; margin-bottom:0em; background:#F0F0F0; color:#000000;}  
  /* end css.sty */  


  --> 
  </style>
  <meta content='latex2html_via_tex4ht.tex' name='src'>
  <script>
  window.MathJax = { tex: { tags: "ams", }, }; 
  </script>
  <script async='async' id='MathJax-script' src='https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js' type='text/javascript'></script>
  <script>
  window.MathJax = { tex: { tags: "ams", processEscapes: true, processEnvironments: true, packages: ['base', 'color', 'ams', 'boldsymbol', 'newcommand', 'verb'] }, loader: { load: ['[tex]/color', '[tex]/ams', '[tex]/boldsymbol', '[tex]/newcommand', '[tex]/verb'] } }; 
  </script>
</head>
<body>
  <div class='maketitle'>
    <h2 class='titleHead'>My notes on how to use Tex4ht+MathJax</h2>

    <div class='author'>
      <span class='cmr-12'>Victor Kozyakin</span>
    </div>
    <br>

    <div class='date'>
      <span class='cmr-12'>October 10, 2023</span>
    </div>
  </div>

  <h3 class='sectionHead' id='call-command'><span class='titlemark'>1</span> <a id='x1-10001'></a>Call Command</h3>
  <!-- l. 24 -->
  <p class='noindent'>My problem was to make a HTML ﬁle with plenty of mathematics from a LaTeX one. As a beginner, I immediately faced the following problems:</p>

  <ul class='itemize1'>
    <li class='itemize'>How to run Tex4ht to get HTML ﬁle with mathematics?</li>

    <li class='itemize'>What to do to make proper referencing of mathematical formulas?</li>

    <li class='itemize'>How to cope with TikZ ﬁgures?</li>
  </ul>
  <!-- l. 32 -->
  <p class='indent'>After a while I discovered that the most suitable way for me is to join Tex4ht with MathJax. And the simplest way was to run the following command to process <span class='obeylines-h verb cmtt-10'>test.tex</span> ﬁle:</p>

  <pre class='verbatim' id='verbatim-1'>
make4ht -s test.tex "myconfig" " -cunihtf -utf8"
</pre><!-- l. 39 -->
  <p class='nopar'>and after that, if one wants to embed into resulted <span class='obeylines-h verb cmtt-10'>test.html</span> the css-ﬁle <span class='obeylines-h verb cmtt-10'>test.css</span> generated during previous command, one should issue one the following command</p>

  <pre class='verbatim' id='verbatim-2'>
htlatex test.tex "myconfig" " -cunihtf -utf8"
</pre><!-- l. 45 -->
  <p class='nopar'><span class='cmr-9'>or once more</span>
  </p>

  <pre class='verbatim' id='verbatim-3'>
make4ht -s test.tex "myconfig" " -cunihtf -utf8"
</pre><!-- l. 49 -->
  <p class='nopar'>where the conﬁg ﬁle <span class='obeylines-h verb cmtt-10'>myconfig.cfg</span> is as follows</p>

  <pre class='verbatim' id='verbatim-4'>
\Preamble{xhtml,html5,0,mathjax,p-indent,charset=utf-8,css-in,fn-in}
\textwidth=2160pt

\Css{body { margin:5\% 5\%; max-width:72em; font-size:large; padding:0 40px;}}
\Css{p.indent {text-indent:1.5em;}}
\Css{.columns-3 p.indent {text-indent:0em;}}
\Css{p.bibitem-p { text-indent: 1.5em; margin-left: 2em; margin-top:0em; margin-bottom:0em;
    background:\#F0F0F0; color:\#000000;}}

\Configure{@HEAD}{\HCode{
&lt;script&gt;
window.MathJax = {
  tex: {
    tags: "ams",
    processEscapes: true,
    processEnvironments: true,
    packages: [’base’, ’color’, ’ams’, ’boldsymbol’, ’newcommand’, ’verb’]
  },
  loader: {
    load: [’[tex]/color’, ’[tex]/ams’, ’[tex]/boldsymbol’, ’[tex]/newcommand’, ’[tex]/verb’]
  }
};
&lt;/script&gt;\Hnewline
}}

\def\eqref#1{$\mathrm{(\ref{#1})}$}

\begin{document}

\EndPreamble
</pre><!-- l. 85 -->
  <p class='nopar'>
  </p>
  <!-- l. 87 -->
  <p class='noindent'>
  </p>

  <h3 class='sectionHead' id='how-to-reference-equations-in-texhtmathjax'><span class='titlemark'>2</span> <a id='x1-20002'></a>How to reference equations in TeX4ht+MathJax</h3>
  <!-- l. 88 -->
  <p class='noindent'>Unfortunately, it turned out that reference in conjunction TeX4ht+MathJax works well when they referenced sections, subsections and other structure element that are in <span class='cmbx-10'>text mode</span>, but when you are trying to reference the label of equation you are getting ???.</p>
  <!-- l. 93 -->
  <p class='indent'>The problem is turned out to be rather easily solvable: to reference labels of equations, align or other things in <span class='cmbx-10'>math mode</span> you should put the calling <span class='obeylines-h verb cmtt-10'>\eqref</span> or <span class='obeylines-h verb cmtt-10'>\ref</span> in a <span class='cmbx-10'>math environment</span>, e.g. by surrounding them by <span class='obeylines-h verb cmtt-10'>$’s</span> or <span class='obeylines-h verb cmtt-10'>\(</span>…<span class='obeylines-h verb cmtt-10'>\)</span>. Another way is to redeﬁne the command <span class='obeylines-h verb cmtt-10'>\eqref</span> in order that it will be invoked in math mode automatically (see the appropriate string in the conﬁg ﬁle <span class='obeylines-h verb cmtt-10'>myconfig.cfg</span>.</p>
  <!-- l. 101 -->
  <p class='indent'>So, for the LaTeX code below</p>

  <pre class='verbatim' id='verbatim-5'>
\begin{equation}
\boldsymbol{f}(x)=1\label{eq}
\end{equation}

\[
1\neq1. \tag{OneIsNotOne Condition}\label{E:mycond}
\]

Here, the reference to \tag{OneIsNotOne Condition} in previous
equation is as follows: \eqref{E:mycond}

\begin{align}
a&amp;=1\label{A}\\
b&amp;=0\label{B}
\end{align}
Example of references: we have equation \eqref{eq} from Sec. \ref{S1}. Or $\ref{A}$-\eqref{B}.
</pre><!-- l. 120 -->
  <p class='nopar'>we obtain the following output:</p>
  <!-- l. 125 -->
  <p class='indent'>\begin {equation} \boldsymbol {f}(x)=1\label {eq} \end {equation}<a id='x1-2001r1'></a></p>
  <!-- l. 129 -->
  <p class='indent'>\[ 1\neq 1. \tag {OneIsNotOne Condition}\label {E:mycond} \]</p>
  <!-- l. 131 -->
  <p class='indent'>Here, the reference to <span class='obeylines-h verb cmtt-10'>\tag{OneIsNotOne&nbsp;Condition}</span> in previous equation is as follows: \(\mathrm {(\ref {E:mycond})}\)</p>
  <!-- l. 137 -->
  <p class='indent'>\begin {align} a & =1\label {A} \\ b & =0\label {B} \end {align}</p>
  <!-- l. 138 -->
  <p class='indent'>Example of references: we have equation \(\mathrm {(\ref {eq})}\) from Sec. <a href='#call-command'>1<!-- tex4ht:ref: S1  --></a>. Or \(\ref {A}\)-\(\mathrm {(\ref {B})}\).</p>
  <!-- l. 141 -->
  <p class='noindent'>
  </p>

  <h3 class='sectionHead' id='how-to-cope-with-tikz-figures'><span class='titlemark'>3</span> <a id='x1-30003'></a>How to cope with TikZ ﬁgures</h3>
  <!-- l. 142 -->
  <p class='noindent'>Tex4th supports TikZ, however, for correct displaying text and math symbols in TikZ picture, it is needed to put in the preamble of tex ﬁle the following lines, before TikZ package loading:</p>

  <pre class='verbatim' id='verbatim-6'>
\ifdefined\HCode
   \def\pgfsysdriver{pgfsys-dvisvgm4ht.def}
\fi
</pre><!-- l. 149 -->
  <p class='nopar'>
  </p>
  <!-- l. 151 -->
  <p class='indent'>With recent versions of <span class='cmtt-10'>GhostScript</span> (\(&gt;\)=10.02.0) in your LaTeX system and <span class='cmtt-10'>dvisvgm</span> (\(&lt;\)3.1.1), <span class='cmtt-10'>tex4th</span> creates a corrupted version of the <span class='cmtt-10'>svg</span> ﬁle, by including the following uncommented string (from <span class='cmtt-10'>GhostScript</span> output) in its ﬁrst lines: “<span class='cmti-10'>The old, written in PostScript, PDF interpreter has been removed entirely. You should cease using -dNEWDPF as it has no eﬀect n</span>”. This should be recovered when <span class='cmtt-10'>dvisvgm</span> version \(&gt;\)=3.1.1 will be installed in your LaTeX system. Until then, if it is your case and you will see no normal picture in the created html ﬁle, then <span class='cmbx-10'>this phrase must be removed manually in the generated svg ﬁle using any text editor so that this ﬁle to be displayed normally in the html output!</span></p>
  <!-- l. 163 -->
  <p class='indent'>Below is an example of using TikZ.</p>

  <figure class='figure' id='-example-of-stanford'>
    <a id='x1-30011'></a> <!-- l. 167 -->
    <p class='noindent'><img alt='HHS˜Sxy1−1−1111SS˜ ' src='latex2html_via_tex4ht0x.svg'>
    </p>

    <figcaption class='caption'>
      <span class='id'>Figure&nbsp;1:</span> <span class='content'>Example of Stanford</span>
    </figcaption>
    <!-- tex4ht:label?: x1-30011  -->
  </figure>
  <!-- l. 223 -->
  <p class='indent'>Citation example:&nbsp;<span class='cite'>[<a href='#XNDKKP:DSS96'>1</a>]</span></p>

  <h3 class='likesectionHead' id='references'><a id='x1-4000'></a>References</h3>
  <!-- l. 18 -->
  <p class='noindent'>
  </p>

  <div class='thebibliography'>
    <p class='bibitem'><span class='biblabel'>[1]<span class='bibsp'>&nbsp;&nbsp;&nbsp;</span></span><a id='XNDKKP:DSS96'></a>Al-Nayef&nbsp;A., Diamond&nbsp;P., Kloeden&nbsp;P. et&nbsp;al. Bi-shadowing and delay equations&nbsp;// Dynam. Stability Systems. 1996. Vol.&nbsp;11, no.&nbsp;2. P.&nbsp;121–134.</p>
  </div>
</body>
</html>
